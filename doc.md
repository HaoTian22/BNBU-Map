# BNBU-Map ç³»ç»Ÿæ¶æ„ä¸åŠŸèƒ½æ–‡æ¡£

å…¨æ–‡ AI ç”Ÿæˆï¼Œä»…ç»è¿‡ç®€å•æ ¡å¯¹ï¼Œä»…ä¾›å‚è€ƒã€‚

## ğŸ“‹ ç›®å½•
- [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
- [æ•´ä½“æ¶æ„å›¾](#æ•´ä½“æ¶æ„å›¾)
- [æ•°æ®æµç¨‹å›¾](#æ•°æ®æµç¨‹å›¾)
- [æ ¸å¿ƒåŠŸèƒ½æ¨¡å—](#æ ¸å¿ƒåŠŸèƒ½æ¨¡å—)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [éƒ¨ç½²æ¶æ„](#éƒ¨ç½²æ¶æ„)
- [æ›´æ–°æœºåˆ¶](#æ›´æ–°æœºåˆ¶)

---

## ç³»ç»Ÿæ¦‚è¿°

BNBU-Map æ˜¯ä¸€ä¸ªåŸºäº OpenStreetMap æ•°æ®çš„æ ¡å›­åœ°å›¾åº”ç”¨ï¼Œä¸ºåŒ—å¸ˆæ¸¯æµ¸å¤§ï¼ˆBNBUï¼‰æä¾›äº¤äº’å¼æ ¡å›­å¯¼èˆªæœåŠ¡ã€‚ç³»ç»Ÿé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œé€šè¿‡ TileServer GL æä¾›åœ°å›¾ç“¦ç‰‡æœåŠ¡ï¼Œä½¿ç”¨ Maplibre GL JS åœ¨å‰ç«¯æ¸²æŸ“åœ°å›¾ã€‚

### æ ¸å¿ƒç‰¹æ€§
- ğŸ—ºï¸ äº¤äº’å¼åœ°å›¾ï¼ˆç¼©æ”¾ã€å¹³ç§»ï¼‰
- ğŸ” æ™ºèƒ½æœç´¢ï¼ˆæ”¯æŒä¸­è‹±æ–‡ã€æ‹¼éŸ³ï¼‰
- ğŸ“ å®æ—¶ GPS å®šä½
- ğŸ·ï¸ å¤šç±»åˆ« POI ç­›é€‰
- ğŸ“± å“åº”å¼è®¾è®¡ï¼ˆç§»åŠ¨ç«¯é€‚é…ï¼‰
- ğŸ”— POI åˆ†äº«é“¾æ¥
- ğŸ¨ æ¯›ç»ç’ƒ UI æ•ˆæœ

---

## æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¨æˆ·å±‚ (User Layer)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ æ¡Œé¢æµè§ˆå™¨ â”‚  â”‚ ç§»åŠ¨æµè§ˆå™¨ â”‚  â”‚  å¹³æ¿    â”‚  â”‚ å¾®ä¿¡æµè§ˆå™¨â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ HTTPS
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯åº”ç”¨å±‚ (Frontend)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    index.html                           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ åœ°å›¾æ¸²æŸ“  â”‚  â”‚ æœç´¢å¼•æ“  â”‚  â”‚ GPSå®šä½  â”‚  â”‚ UIæ§åˆ¶ â”‚ â”‚   â”‚
â”‚  â”‚  â”‚(Maplibre)â”‚  â”‚(Pinyin)  â”‚  â”‚(Geoloc.) â”‚  â”‚(Layer) â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                      â”‚
                â”‚ Load POI.json        â”‚ Request Map Tiles
                â–¼                      â”‚ (maptiles.haotian22.top)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â–¼
â”‚   é™æ€æ•°æ®æœåŠ¡           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚    è…¾è®¯ EdgeOne CDN              â”‚
â”‚  â”‚   POI.json       â”‚   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ (GeoJSONæ ¼å¼)    â”‚   â”‚  â”‚  â”‚  å…¨çƒåŠ é€ŸèŠ‚ç‚¹             â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â”‚  ç¼“å­˜åœ°å›¾ç“¦ç‰‡             â”‚     â”‚
â”‚           â”‚              â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚           â”‚ æ¯æ—¥æ›´æ–°     â”‚  â”‚           â”‚ å›æº                   â”‚
â”‚           â–¼              â”‚  â”‚           â”‚ TileServer GL      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚           â–¼                        â”‚
â”‚  â”‚  Overpass API    â”‚   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  (OpenStreetMap) â”‚   â”‚  â”‚  â”‚   TileServer GL          â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚ OSM Liberty Styleâ”‚    â”‚     â”‚
                             â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚     â”‚
                             â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚     â”‚
                             â”‚  â”‚  â”‚  MBTiles (.mbtiles)â”‚  â”‚     â”‚
                             â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚     â”‚
                             â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
                             â”‚           â”‚                        â”‚
                             â”‚           â”‚ æ¯å‘¨æ›´æ–°               â”‚
                             â”‚           â–¼                        â”‚
                             â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
                             â”‚  â”‚  OpenMapTiles            â”‚     â”‚
                             â”‚  â”‚  (build-maptiles.sh)     â”‚     â”‚
                             â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚     â”‚
                             â”‚  â”‚  â”‚ process-         â”‚    â”‚     â”‚
                             â”‚  â”‚  â”‚ openmaptiles.lua â”‚    â”‚     â”‚
                             â”‚  â”‚  â”‚ (Tilemakerå¤‡é€‰)  â”‚    â”‚     â”‚
                             â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚     â”‚
                             â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚     â”‚
                             â”‚  â”‚  â”‚ config-          â”‚    â”‚     â”‚
                             â”‚  â”‚  â”‚ openmaptiles.jsonâ”‚    â”‚     â”‚
                             â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚     â”‚
                             â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
                             â”‚           â”‚                        â”‚
                             â”‚           â–¼                        â”‚
                             â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
                             â”‚  â”‚  OpenStreetMap æ•°æ®æº    â”‚     â”‚
                             â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ•°æ®æµç¨‹å›¾

### 1. POI æ•°æ®æ›´æ–°æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cron å®šæ—¶   â”‚ (æ¯æ—¥ 3:10 AM UTC+8)
â”‚  è§¦å‘è„šæœ¬    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ fetch-poi.sh/bat â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€ 1. è¯»å– Overpass.txt (æŸ¥è¯¢è¯­å¥)
       â”‚
       â”œâ”€â”€â”€ 2. è°ƒç”¨ Overpass API
       â”‚         â”‚
       â”‚         â–¼
       â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚    â”‚ OpenStreetMap  â”‚
       â”‚    â”‚   æ•°æ®åº“        â”‚
       â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€ 3. éªŒè¯å“åº”æ•°æ®
       â”‚
       â”œâ”€â”€â”€ 4. ä¿å­˜ä¸º POI.json
       â”‚
       â””â”€â”€â”€ 5. æ—¥å¿—è®°å½•
              â”‚
              â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  POI.json    â”‚ â”€â”€â”€â”€â”€â†’ å‰ç«¯åŠ è½½ä½¿ç”¨
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. åœ°å›¾ç“¦ç‰‡æ›´æ–°æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cron å®šæ—¶   â”‚ (æ¯å‘¨ä¸€ 3:20 AM UTC+8)
â”‚  è§¦å‘è„šæœ¬    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ build-maptiles.sh â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€ 1. ä¸‹è½½ OSM åŸå§‹æ•°æ® (.osm.pbf)
       â”‚         â”‚
       â”‚         â–¼
       â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚    â”‚ OpenStreetMap  â”‚
       â”‚    â”‚   æ•°æ®å¯¼å‡º      â”‚
       â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€ 2. ä½¿ç”¨ OpenMapTiles æ„å»º (é¦–é€‰)
       â”‚         â”‚ æˆ– Tilemaker (å¤‡é€‰)
       â”‚         â”‚
       â”‚         â”œâ”€ process-openmaptiles.lua (å¤„ç†é€»è¾‘)
       â”‚         â””â”€ config-openmaptiles.json (é…ç½®)
       â”‚         â”‚
       â”‚         â–¼
       â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚    â”‚ output.mbtiles  â”‚
       â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€ 3. éƒ¨ç½²åˆ° TileServer GL
       â”‚
       â”œâ”€â”€â”€ 4. æœåŠ¡é‡å¯
       â”‚
       â””â”€â”€â”€ 5. CDN ç¼“å­˜åˆ·æ–°
              â”‚
              â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  TileServer GL   â”‚ â”€â”€â”€â”€â”€â†’ EdgeOne CDN â”€â”€â”€â”€â”€â†’ ç”¨æˆ·
       â”‚  (Docker)        â”‚        (maptiles.haotian22.top)
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. å‰ç«¯åº”ç”¨æ›´æ–°æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub Repo â”‚
â”‚  æ›´æ–°ä»£ç      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cron å®šæ—¶       â”‚ (æ¯æ—¥ 3:00 AM UTC+8)
â”‚  æˆ–æ‰‹åŠ¨è§¦å‘       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ update-from-github.sh/bat â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€ 1. è¯»å– files-to-update.txt
       â”‚
       â”œâ”€â”€â”€ 2. ä» GitHub ä¸‹è½½æœ€æ–°æ–‡ä»¶
       â”‚         â”‚
       â”‚         â–¼
       â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚    â”‚ GitHub Repository  â”‚
       â”‚    â”‚ (HaoTian22/BNBU-Map)â”‚
       â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€ 3. éªŒè¯æ–‡ä»¶å®Œæ•´æ€§
       â”‚
       â”œâ”€â”€â”€ 4. è¦†ç›–æœ¬åœ°æ–‡ä»¶
       â”‚
       â””â”€â”€â”€ 5. é‡è½½ Web æœåŠ¡
              â”‚
              â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ index.html   â”‚ â”€â”€â”€â”€â”€â†’ ç”¨æˆ·è®¿é—®
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. ç”¨æˆ·äº¤äº’æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·è®¿é—®  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åŠ è½½ index.html  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”œâ”€â”€â”€â†’ 1. åŠ è½½åœ°å›¾æ ·å¼
      â”‚        â”‚
      â”‚        â–¼
      â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚    â”‚ TileServer GL      â”‚
      â”‚    â”‚ /styles/osm-libertyâ”‚
      â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”œâ”€â”€â”€â†’ 2. è¯·æ±‚åœ°å›¾ç“¦ç‰‡
      â”‚        â”‚
      â”‚        â–¼
      â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚    â”‚ TileServer GL      â”‚
      â”‚    â”‚ /tiles/*.pbf       â”‚
      â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”œâ”€â”€â”€â†’ 3. åŠ è½½ POI æ•°æ®
      â”‚        â”‚
      â”‚        â–¼
      â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚    â”‚    POI.json        â”‚
      â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”œâ”€â”€â”€â†’ 4. æ¸²æŸ“æ ‡è®°ç‚¹
      â”‚
      â”œâ”€â”€â”€â†’ 5. åˆå§‹åŒ–æœç´¢å¼•æ“
      â”‚
      â”œâ”€â”€â”€â†’ 6. æ¢å¤åœ°å›¾çŠ¶æ€
      â”‚        â”‚
      â”‚        â”œâ”€ ä» URL Hash è¯»å–
      â”‚        â””â”€ ä» LocalStorage è¯»å–
      â”‚
      â””â”€â”€â”€â†’ 7. ç”¨æˆ·äº¤äº’
               â”‚
               â”œâ”€ æœç´¢ POI
               â”œâ”€ ç­›é€‰ç±»åˆ«
               â”œâ”€ GPS å®šä½
               â”œâ”€ ç‚¹å‡»æ ‡è®°
               â””â”€ åˆ†äº«é“¾æ¥
```

---

## æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. åœ°å›¾æ¸²æŸ“æ¨¡å—
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Maplibre GL JS Engine       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  åœ°å›¾å®¹å™¨ (#map)          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Vector Tiles       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  (.pbf format)      â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  OSM Liberty Style  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  (style.json)       â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                  â”‚
â”‚  åŠŸèƒ½ï¼š                          â”‚
â”‚  â€¢ ç“¦ç‰‡åŠ è½½ä¸æ¸²æŸ“                â”‚
â”‚  â€¢ ç¼©æ”¾/å¹³ç§»æ§åˆ¶                 â”‚
â”‚  â€¢ åŠ¨ç”»æ•ˆæœ (flyTo)              â”‚
â”‚  â€¢ çŠ¶æ€æŒä¹…åŒ– (URL/Storage)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. POI æ ‡è®°ç³»ç»Ÿ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      POI Marker System          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  æ•°æ®åŠ è½½ (POI.json)      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  åˆ†ç±»è¯†åˆ«ä¸é¢œè‰²æ˜ å°„        â”‚  â”‚
â”‚  â”‚  â€¢ dormitory (è“è‰²)       â”‚  â”‚
â”‚  â”‚  â€¢ restaurant (çº¢è‰²)      â”‚  â”‚
â”‚  â”‚  â€¢ amenity (ç»¿è‰²)         â”‚  â”‚
â”‚  â”‚  â€¢ ...ç­‰9å¤§ç±»             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  åˆ›å»º Maplibre Marker     â”‚  â”‚
â”‚  â”‚  â€¢ é¢œè‰²æ ‡è®°               â”‚  â”‚
â”‚  â”‚  â€¢ å¼¹çª— (Popup)           â”‚  â”‚
â”‚  â”‚  â€¢ æ˜¾éšåŠ¨ç”»               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å­˜å‚¨åˆ° markerData[]      â”‚  â”‚
â”‚  â”‚  ç”¨äºæœç´¢å’Œç­›é€‰           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. æœç´¢å¼•æ“
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Search Engine              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  è¾“å…¥æ¡†ç›‘å¬               â”‚  â”‚
â”‚  â”‚  (#search-input)          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å¤šå­—æ®µåŒ¹é…               â”‚  â”‚
â”‚  â”‚  â€¢ name:en (è‹±æ–‡å)       â”‚  â”‚
â”‚  â”‚  â€¢ name:zh (ä¸­æ–‡å)       â”‚  â”‚
â”‚  â”‚  â€¢ pinyin (æ‹¼éŸ³)          â”‚  â”‚
â”‚  â”‚  â€¢ short_name (ç®€ç§°)      â”‚  â”‚
â”‚  â”‚  â€¢ category (ç±»åˆ«)        â”‚  â”‚
â”‚  â”‚  â€¢ amenity/building (å±æ€§)â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  æ‹¼éŸ³è½¬æ¢ (pinyin-pro)    â”‚  â”‚
â”‚  â”‚  æ”¯æŒä¸­æ–‡æ‹¼éŸ³æœç´¢         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  è·ç¦»æ’åº (å¯é€‰)          â”‚  â”‚
â”‚  â”‚  åŒååœ°ç‚¹æŒ‰è·ç¦»æ’åˆ—       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ç»“æœå±•ç¤º                 â”‚  â”‚
â”‚  â”‚  â€¢ æœ€å¤š10æ¡               â”‚  â”‚
â”‚  â”‚  â€¢ æ˜¾ç¤ºè·ç¦» (å¦‚æœæœ‰å®šä½)  â”‚  â”‚
â”‚  â”‚  â€¢ ç‚¹å‡»é£åˆ°ç›®æ ‡           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. GPS å®šä½ç³»ç»Ÿ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      GPS Location System        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å®šä½æŒ‰é’® (#locate-button)â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Geolocation API          â”‚  â”‚
â”‚  â”‚  â€¢ getCurrentPosition()   â”‚  â”‚
â”‚  â”‚  â€¢ watchPosition()        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ä½ç½®è¿‡æ»¤                 â”‚  â”‚
â”‚  â”‚  â€¢ ç²¾åº¦è¿‡æ»¤ (>50må¿½ç•¥)    â”‚  â”‚
â”‚  â”‚  â€¢ è·ç¦»è¿‡æ»¤ (<3må¿½ç•¥)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  åˆ›å»ºç”¨æˆ·ä½ç½®æ ‡è®°         â”‚  â”‚
â”‚  â”‚  â€¢ è“è‰²åœ†ç‚¹               â”‚  â”‚
â”‚  â”‚  â€¢ å®æ—¶æ›´æ–°ä½ç½®           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  é¦–æ¬¡å®šä½è‡ªåŠ¨é£åˆ°ç”¨æˆ·ä½ç½® â”‚  â”‚
â”‚  â”‚  è€ƒè™‘ç§»åŠ¨ç«¯é¢æ¿é®æŒ¡       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  æœç´¢ç»“æœè·ç¦»è®¡ç®—         â”‚  â”‚
â”‚  â”‚  ä½¿ç”¨ Haversine å…¬å¼      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5. å›¾å±‚ç­›é€‰ç³»ç»Ÿ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Layer Filter System          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å›¾å±‚æ§åˆ¶é¢æ¿             â”‚  â”‚
â”‚  â”‚  (.layer-control)         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  åˆ†ç±»åˆ†ç»„                 â”‚  â”‚
â”‚  â”‚  â€¢ Buildings (3ç±»)        â”‚  â”‚
â”‚  â”‚  â€¢ Dining (4ç±»)           â”‚  â”‚
â”‚  â”‚  â€¢ Facilities (2ç±»)       â”‚  â”‚
â”‚  â”‚  â€¢ ...ç­‰9å¤§ç»„             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  çŠ¶æ€ç®¡ç† (groupStates)   â”‚  â”‚
â”‚  â”‚  è®°å½•æ¯ä¸ªåˆ†ç»„çš„é€‰ä¸­çŠ¶æ€   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  æ ‡è®°æ˜¾éšæ§åˆ¶             â”‚  â”‚
â”‚  â”‚  â€¢ marker-hidden class    â”‚  â”‚
â”‚  â”‚  â€¢ CSS åŠ¨ç”»è¿‡æ¸¡           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å¿«æ·æ“ä½œ                 â”‚  â”‚
â”‚  â”‚  â€¢ Select All (å…¨é€‰)      â”‚  â”‚
â”‚  â”‚  â€¢ Unselect All (å…¨ä¸é€‰)  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6. URL çŠ¶æ€ç®¡ç†
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    URL State Management         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  åˆå§‹åŒ–åœ°å›¾çŠ¶æ€           â”‚  â”‚
â”‚  â”‚  getInitialMapState()     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚      â–¼             â–¼             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚URL Hashâ”‚  â”‚ LocalStorage â”‚   â”‚
â”‚  â”‚ä¼˜å…ˆçº§é«˜â”‚  â”‚  ä½œä¸ºå¤‡é€‰    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚      â”‚             â”‚             â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  è§£ææ ¼å¼                 â”‚  â”‚
â”‚  â”‚  #map=zoom/lat/lng        â”‚  â”‚
â”‚  â”‚  &poi=id (å¯é€‰)           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  è®¾ç½®åœ°å›¾è§†å›¾             â”‚  â”‚
â”‚  â”‚  map.setCenter/Zoom       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  æ‰“å¼€ POI (å¦‚æœæŒ‡å®š)      â”‚  â”‚
â”‚  â”‚  å®šä½å¹¶å±•å¼€ Popup         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ç›‘å¬åœ°å›¾å˜åŒ–             â”‚  â”‚
â”‚  â”‚  moveend äº‹ä»¶             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å®æ—¶æ›´æ–° URL å’Œå­˜å‚¨      â”‚  â”‚
â”‚  â”‚  â€¢ history.replaceState() â”‚  â”‚
â”‚  â”‚  â€¢ localStorage.setItem() â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7. åŠ è½½ç®¡ç†ç³»ç»Ÿ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Loading Management           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  åŠ è½½é®ç½©å±‚               â”‚  â”‚
â”‚  â”‚  (#loading-overlay)       â”‚  â”‚
â”‚  â”‚  â€¢ æ¯›ç»ç’ƒæ•ˆæœ             â”‚  â”‚
â”‚  â”‚  â€¢ åŠ è½½åŠ¨ç”»               â”‚  â”‚
â”‚  â”‚  â€¢ è¿›åº¦æ¡                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ç½‘ç»œè¯·æ±‚æ‹¦æˆª             â”‚  â”‚
â”‚  â”‚  é‡å†™ window.fetch        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  æ£€æµ‹ PBF ç“¦ç‰‡åŠ è½½        â”‚  â”‚
â”‚  â”‚  â€¢ ç»Ÿè®¡è¯·æ±‚æ•°             â”‚  â”‚
â”‚  â”‚  â€¢ è®¡ç®—åŠ è½½è¿›åº¦           â”‚  â”‚
â”‚  â”‚  â€¢ æ›´æ–°è¿›åº¦æ¡ (0-60%)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ç›‘å¬åœ°å›¾äº‹ä»¶             â”‚  â”‚
â”‚  â”‚  â€¢ styledata (30%)        â”‚  â”‚
â”‚  â”‚  â€¢ data (80%)             â”‚  â”‚
â”‚  â”‚  â€¢ load (90%)             â”‚  â”‚
â”‚  â”‚  â€¢ idle (100%)            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  è‡ªåŠ¨éšè—é®ç½©             â”‚  â”‚
â”‚  â”‚  â€¢ æ·¡å‡ºåŠ¨ç”» (0.5s)        â”‚  â”‚
â”‚  â”‚  â€¢ è¶…æ—¶ä¿æŠ¤ (15s)         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Frontend Stack          â”‚
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Maplibre GL JS (v3.6.0)   â”‚ â”‚
â”‚  â”‚  åœ°å›¾æ¸²æŸ“å¼•æ“              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  pinyin-pro (v3.19.6)      â”‚ â”‚
â”‚  â”‚  ä¸­æ–‡æ‹¼éŸ³è½¬æ¢              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  åŸç”Ÿ JavaScript (ES6+)    â”‚ â”‚
â”‚  â”‚  â€¢ Fetch API               â”‚ â”‚
â”‚  â”‚  â€¢ Geolocation API         â”‚ â”‚
â”‚  â”‚  â€¢ LocalStorage API        â”‚ â”‚
â”‚  â”‚  â€¢ History API             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  CSS3                      â”‚ â”‚
â”‚  â”‚  â€¢ Flexbox å¸ƒå±€            â”‚ â”‚
â”‚  â”‚  â€¢ CSS Animations          â”‚ â”‚
â”‚  â”‚  â€¢ Backdrop Filter (æ¯›ç»ç’ƒ)â”‚ â”‚
â”‚  â”‚  â€¢ Media Queries (å“åº”å¼)  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  HTML5                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åç«¯æŠ€æœ¯
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Backend Stack           â”‚
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  TileServer GL             â”‚ â”‚
â”‚  â”‚  â€¢ Node.js åœ°å›¾æœåŠ¡å™¨      â”‚ â”‚
â”‚  â”‚  â€¢ æä¾›çŸ¢é‡ç“¦ç‰‡ (.pbf)     â”‚ â”‚
â”‚  â”‚  â€¢ Docker å®¹å™¨åŒ–éƒ¨ç½²       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  OpenMapTiles (é¦–é€‰)       â”‚ â”‚
â”‚  â”‚  â€¢ åœ°å›¾ç“¦ç‰‡æ„å»ºå·¥å…·        â”‚ â”‚
â”‚  â”‚  â€¢ OSM â†’ MBTiles è½¬æ¢      â”‚ â”‚
â”‚  â”‚  Tilemaker (å¤‡é€‰)          â”‚ â”‚
â”‚  â”‚  â€¢ C++ åœ°å›¾æ„å»ºå·¥å…·        â”‚ â”‚
â”‚  â”‚  â€¢ Lua è„šæœ¬å¤„ç†æ•°æ®        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Overpass API              â”‚ â”‚
â”‚  â”‚  â€¢ OSM æ•°æ®æŸ¥è¯¢æ¥å£        â”‚ â”‚
â”‚  â”‚  â€¢ è¿”å› GeoJSON æ ¼å¼       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Nginx / Apache            â”‚ â”‚
â”‚  â”‚  é™æ€æ–‡ä»¶æœåŠ¡å™¨            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Bash Shell Scripts        â”‚ â”‚
â”‚  â”‚  â€¢ fetch-poi.sh            â”‚ â”‚
â”‚  â”‚  â€¢ build-maptiles.sh       â”‚ â”‚
â”‚  â”‚  â€¢ update-from-github.sh   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Cron (Linux) / Task       â”‚ â”‚
â”‚  â”‚  Scheduler (Windows)       â”‚ â”‚
â”‚  â”‚  å®šæ—¶ä»»åŠ¡è°ƒåº¦              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æ ¼å¼
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Data Formats            â”‚
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  GeoJSON                   â”‚ â”‚
â”‚  â”‚  POI æ•°æ®æ ¼å¼              â”‚ â”‚
â”‚  â”‚  {                         â”‚ â”‚
â”‚  â”‚    "elements": [           â”‚ â”‚
â”‚  â”‚      {                     â”‚ â”‚
â”‚  â”‚        "type": "node",     â”‚ â”‚
â”‚  â”‚        "id": 123,          â”‚ â”‚
â”‚  â”‚        "lat": 22.354,      â”‚ â”‚
â”‚  â”‚        "lon": 113.515,     â”‚ â”‚
â”‚  â”‚        "tags": {...}       â”‚ â”‚
â”‚  â”‚      }                     â”‚ â”‚
â”‚  â”‚    ]                       â”‚ â”‚
â”‚  â”‚  }                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  MBTiles                   â”‚ â”‚
â”‚  â”‚  åœ°å›¾ç“¦ç‰‡å­˜å‚¨æ ¼å¼          â”‚ â”‚
â”‚  â”‚  â€¢ SQLite æ•°æ®åº“           â”‚ â”‚
â”‚  â”‚  â€¢ åŒ…å«å‹ç¼©çš„ PBF ç“¦ç‰‡     â”‚ â”‚
â”‚  â”‚  â€¢ åŒ…å«å…ƒæ•°æ®              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  OSM PBF                   â”‚ â”‚
â”‚  â”‚  OpenStreetMap åŸå§‹æ•°æ®    â”‚ â”‚
â”‚  â”‚  â€¢ å‹ç¼©çš„äºŒè¿›åˆ¶æ ¼å¼        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## éƒ¨ç½²æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ç”¨æˆ·è®¿é—®å±‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚            å‰ç«¯é¡µé¢ (u-map.haotian22.top)                â”‚ â”‚
â”‚  â”‚  - index.html (Maplibre GL JS)                          â”‚ â”‚
â”‚  â”‚  - POI.json                                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                 â”‚
â”‚                              â–¼ è¯·æ±‚åœ°å›¾ç“¦ç‰‡                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚       è…¾è®¯ EdgeOne CDN (maptiles.haotian22.top)          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  å…¨çƒåŠ é€ŸèŠ‚ç‚¹                             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  ç¼“å­˜åœ°å›¾ç“¦ç‰‡                             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  æ™ºèƒ½è·¯ç”±                                              â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚           â”‚ å›æº                                           â”‚ â”‚
â”‚  â”‚           â”‚ vps.haotian22.top:8080                        â”‚ â”‚
â”‚  â”‚           â–¼                                                â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚   TileServer GL                           â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - ç›‘å¬ç«¯å£: 8080                                      â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - é…ç½®: config.json                               â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - æ ·å¼: styles/osm_liberty.json                   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - æ•°æ®: /data/*.mbtiles                           â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                VPS æœåŠ¡å™¨ (vps.haotian22.top)                  â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚         Docker Container (TileServer GL)                 â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  TileServer GL (Node.js)                           â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - ç«¯å£: 8080                                      â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - é…ç½®: config.json                               â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - æ ·å¼: styles/osm_liberty.json                   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - æ•°æ®: /data/*.mbtiles                           â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                 â”‚
â”‚                              â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                 æ•°æ®å­˜å‚¨ (Data Storage)                  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚ â”‚
â”‚  â”‚  â”‚  POI.json      â”‚  â”‚  output.mbtilesâ”‚                  â”‚ â”‚
â”‚  â”‚  â”‚  (10-20 KB)    â”‚  â”‚  (50-200 MB)   â”‚                  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚               å®šæ—¶ä»»åŠ¡ (Cron Jobs)                        â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  3:00 AM - update-from-github.sh                   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  3:10 AM - fetch-poi.sh                            â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  3:20 AM (Mon) - build-maptiles.sh                 â”‚  â”‚ â”‚
â”‚  â”‚  â”‚               (OpenMapTilesé¦–é€‰/Tilemakerå¤‡é€‰)      â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å¤–éƒ¨ä¾èµ– (External)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  GitHub        â”‚  â”‚  Overpass API  â”‚  â”‚  OSM Planet    â”‚  â”‚
â”‚  â”‚  æºä»£ç ä»“åº“     â”‚  â”‚  POI æ•°æ®æº    â”‚  â”‚  åœ°å›¾æ•°æ®æº    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç›®å½•ç»“æ„
```
BNBU-Map/
â”œâ”€â”€ index.html                  # ä¸»é¡µé¢ (å‰ç«¯åº”ç”¨)
â”œâ”€â”€ POI.json                    # POI æ•°æ® (GeoJSON)
â”œâ”€â”€ Overpass.txt                # Overpass æŸ¥è¯¢è¯­å¥
â”œâ”€â”€ files-to-update.txt         # éœ€è¦ä» GitHub æ›´æ–°çš„æ–‡ä»¶åˆ—è¡¨
â”‚
â”œâ”€â”€ fetch-poi.sh/bat            # POI æ•°æ®è·å–è„šæœ¬
â”œâ”€â”€ build-maptiles.sh           # åœ°å›¾ç“¦ç‰‡æ„å»ºè„šæœ¬
â”œâ”€â”€ update-from-github.sh/bat   # GitHub æ›´æ–°è„šæœ¬
â”‚
â”œâ”€â”€ tilemaker/                  # Tilemaker é…ç½®
â”‚   â”œâ”€â”€ config-openmaptiles.json
â”‚   â””â”€â”€ process-openmaptiles.lua
â”‚
â”œâ”€â”€ Tileserver-GL/              # TileServer GL é…ç½®
â”‚   â”œâ”€â”€ config.json             # æœåŠ¡å™¨é…ç½®
â”‚   â”œâ”€â”€ docker-compose.yml      # Docker é…ç½®
â”‚   â””â”€â”€ styles/                 # åœ°å›¾æ ·å¼
â”‚       â”œâ”€â”€ osm_liberty.json    # ä¸»æ ·å¼
â”‚       â””â”€â”€ osm_liberty-basic.json
â”‚
â”œâ”€â”€ README.md                   # é¡¹ç›®è¯´æ˜
â””â”€â”€ Readme-Update-Data.md       # æ•°æ®æ›´æ–°è¯´æ˜
```

---

## æ›´æ–°æœºåˆ¶

### 1. POI æ•°æ®è‡ªåŠ¨æ›´æ–°

**æ›´æ–°é¢‘ç‡**: æ¯æ—¥ 3:10 AM (UTC+8)

**æ‰§è¡Œè„šæœ¬**: `fetch-poi.sh` / `fetch-poi.bat`

**å·¥ä½œæµç¨‹**:
1. è¯»å– `Overpass.txt` æŸ¥è¯¢è¯­å¥
2. è°ƒç”¨ Overpass API æŸ¥è¯¢æœ€æ–° POI æ•°æ®
3. éªŒè¯è¿”å›çš„ JSON æ•°æ®
4. ä¿å­˜ä¸º `POI.json`
5. è®°å½•æ›´æ–°æ—¥å¿—

**Cron é…ç½®ç¤ºä¾‹**:
```bash
# æ¯å¤©å‡Œæ™¨3:10æ›´æ–°POIæ•°æ®
10 3 * * * cd /path/to/BNBU-Map && ./fetch-poi.sh >> logs/poi-update.log 2>&1
```

**Overpass æŸ¥è¯¢èŒƒå›´**:
- åŒ—å¸ˆæ¸¯æµ¸å¤§æ ¡å›­èŒƒå›´
- åŒ…å«æ‰€æœ‰ POI ç±»å‹ (å»ºç­‘ã€é¤é¥®ã€è®¾æ–½ç­‰)

---

### 2. åœ°å›¾ç“¦ç‰‡è‡ªåŠ¨æ›´æ–°

**æ›´æ–°é¢‘ç‡**: æ¯å‘¨ä¸€ 3:20 AM (UTC+8)

**æ‰§è¡Œè„šæœ¬**: `build-maptiles.sh`

**å·¥ä½œæµç¨‹**:
1. ä» OSM ä¸‹è½½æœ€æ–°åœ°å›¾æ•°æ® (.osm.pbf)
2. ä½¿ç”¨ Tilemaker å¤„ç†æ•°æ®:
   - åº”ç”¨ `process-openmaptiles.lua` å¤„ç†é€»è¾‘
   - ä½¿ç”¨ `config-openmaptiles.json` é…ç½®
3. ç”Ÿæˆ MBTiles æ–‡ä»¶ (`output.mbtiles`)
4. éƒ¨ç½²åˆ° TileServer GL
5. é‡å¯ TileServer æœåŠ¡
6. æœåŠ¡å°†æœ‰çº¦ 5 åˆ†é’Ÿçš„çŸ­æš‚ä¸å¯ç”¨æ—¶é—´

**Cron é…ç½®ç¤ºä¾‹**:
```bash
# æ¯å‘¨ä¸€å‡Œæ™¨3:20æ›´æ–°åœ°å›¾ç“¦ç‰‡
20 3 * * 1 cd /path/to/BNBU-Map && ./build-maptiles.sh >> logs/tiles-update.log 2>&1
```

**æ›´æ–°å‘¨æœŸè¯´æ˜**:
- å½“å‰è®¡åˆ’æ›´æ–°è‡³: 2026-12-01
- æ›´æ–°æœŸé—´åœ°å›¾æœåŠ¡æš‚æ—¶ä¸å¯ç”¨
- å»ºè®®åœ¨ç”¨æˆ·è®¿é—®ä½å³°æœŸè¿›è¡Œ

---

### 3. å‰ç«¯ä»£ç è‡ªåŠ¨æ›´æ–°

**æ›´æ–°é¢‘ç‡**: æ¯æ—¥ 3:00 AM (UTC+8) æˆ–æŒ‰éœ€æ‰‹åŠ¨è§¦å‘

**æ‰§è¡Œè„šæœ¬**: `update-from-github.sh` / `update-from-github.bat`

**å·¥ä½œæµç¨‹**:
1. è¯»å– `files-to-update.txt` è·å–éœ€è¦æ›´æ–°çš„æ–‡ä»¶åˆ—è¡¨
2. ä» GitHub ä»“åº“ä¸‹è½½æœ€æ–°ç‰ˆæœ¬:
   - ä»“åº“: `HaoTian22/BNBU-Map`
   - åˆ†æ”¯: `main`
3. éªŒè¯æ–‡ä»¶å®Œæ•´æ€§
4. è¦†ç›–æœ¬åœ°æ–‡ä»¶
5. é‡è½½ Web æœåŠ¡ (å¯é€‰)

**Cron é…ç½®ç¤ºä¾‹**:
```bash
# æ¯å¤©å‡Œæ™¨3:00æ›´æ–°å‰ç«¯ä»£ç 
0 3 * * * cd /path/to/BNBU-Map && ./update-from-github.sh >> logs/code-update.log 2>&1
```

**æ›´æ–°æ–‡ä»¶åˆ—è¡¨ (files-to-update.txt)**:
```
index.html
README.md
Readme-Update-Data.md
fetch-poi.sh
fetch-poi.bat
update-from-github.sh
update-from-github.bat
Overpass.txt
```

---

### 4. æ›´æ–°æ—¶é—´çº¿

```
æ—¶é—´çº¿ (UTC+8):

3:00 AM  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ update-from-github.sh       â”‚  æ¯å¤©
         â”‚ æ›´æ–°å‰ç«¯ä»£ç å’Œé…ç½®           â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
3:10 AM  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ fetch-poi.sh                â”‚  æ¯å¤©
         â”‚ æ›´æ–° POI æ•°æ®                â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
3:20 AM  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
(Mon)    â”‚ build-maptiles.sh           â”‚  æ¯å‘¨ä¸€
         â”‚ é‡å»ºåœ°å›¾ç“¦ç‰‡                 â”‚
         â”‚ æœåŠ¡ä¸­æ–­çº¦ 5 åˆ†é’Ÿ            â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
3:30 AM  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ æ‰€æœ‰æœåŠ¡æ¢å¤æ­£å¸¸             â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## POI åˆ†ç±»ç³»ç»Ÿ

### åˆ†ç±»æ˜ å°„å…³ç³»

| åˆ†ç»„ | åŒ…å«ç±»åˆ« | é¢œè‰² | æ ‡è¯† |
|------|---------|------|------|
| **Buildings / å»ºç­‘** | dormitory (å®¿èˆæ¥¼)<br>university (æ•™å­¦æ¥¼)<br>building_other (å…¶ä»–å»ºç­‘) | #60A5FA (æµ…è“)<br>#2563EB (æ·±è“)<br>#94A3B8 (ç°è‰²) | ğŸ¢ |
| **Dining / é¤é¥®** | restaurant (é¤å…)<br>cafe (å’–å•¡å…)<br>food_court (é£Ÿå ‚)<br>fast_food (å¿«é¤) | #EF4444 (çº¢è‰²)<br>#F87171 (æµ…çº¢)<br>#DC2626 (æ·±çº¢)<br>#FCA5A5 (ç²‰çº¢) | ğŸ½ï¸ |
| **Shop / å•†åº—** | shop (å•†åº—) | #F59E0B (æ©™è‰²) | ğŸ›’ |
| **Office / åŠå…¬å®¤** | office (åŠå…¬å®¤) | #8B5CF6 (ç´«è‰²) | ğŸ¢ |
| **Facilities / è®¾æ–½** | amenity (è®¾æ–½)<br>parking (åœè½¦) | #10B981 (ç»¿è‰²)<br>#059669 (æ·±ç»¿) | âš™ï¸ |
| **Healthcare / åŒ»ç–—** | healthcare (åŒ»ç–—) | #EC4899 (ç²‰è‰²) | ğŸ¥ |
| **Tourism / æ—…æ¸¸** | tourism (æ—…æ¸¸) | #14B8A6 (é’è‰²) | ğŸ—ºï¸ |
| **Leisure / ä¼‘é—²** | leisure (ä¼‘é—²) | #F97316 (æ©™çº¢) | ğŸ‰ |
| **Other / å…¶ä»–** | default (é»˜è®¤) | #6B7280 (ç°è‰²) | ğŸ“ |

---

## æ€§èƒ½ä¼˜åŒ–

### 1. å‰ç«¯ä¼˜åŒ–
- ä½¿ç”¨çŸ¢é‡ç“¦ç‰‡ (Vector Tiles) å‡å°‘æ•°æ®ä¼ è¾“
- æ ‡è®°ç‚¹æŒ‰éœ€æ˜¾ç¤º/éšè— (CSS åŠ¨ç”»)
- æœç´¢ç»“æœé™åˆ¶æœ€å¤š 10 æ¡
- LocalStorage ç¼“å­˜åœ°å›¾çŠ¶æ€
- Lazy loading POI æ•°æ®
- é˜²æŠ–å¤„ç†æœç´¢è¾“å…¥

### 2. åç«¯ä¼˜åŒ–
- TileServer GL ä½¿ç”¨ Docker å®¹å™¨åŒ–
- MBTiles æ ¼å¼å‹ç¼©å­˜å‚¨ç“¦ç‰‡
- Nginx åå‘ä»£ç†å’Œç¼“å­˜
- Cron ä»»åŠ¡åœ¨ä½å³°æœŸæ‰§è¡Œ
- å¢é‡æ›´æ–°æœºåˆ¶ (ä»…æ›´æ–°å˜åŒ–çš„æ–‡ä»¶)

### 3. æ•°æ®ä¼˜åŒ–
- POI æ•°æ®å»é‡å’Œæ¸…æ´—
- åœ°å›¾ç“¦ç‰‡é¢„ç”Ÿæˆ (ä¸æ˜¯å®æ—¶æ¸²æŸ“)
- GeoJSON ç²¾ç®€æ— ç”¨å­—æ®µ
- æ‹¼éŸ³ç´¢å¼•é¢„è®¡ç®—

---

## æœªæ¥æ‰©å±•

### è®¡åˆ’åŠŸèƒ½
- [ ] ç¦»çº¿åœ°å›¾æ”¯æŒ (PWA)
- [ ] è·¯å¾„è§„åˆ’ (A* ç®—æ³•)
- [ ] å®¤å†…å¯¼èˆª (å¤šæ¥¼å±‚)
- [ ] ç”¨æˆ·è´¡çŒ® POI
- [ ] å¤šè¯­è¨€æ”¯æŒ (è‹±/ä¸­/ç¹)
- [ ] å¤œé—´æ¨¡å¼
- [ ] AR å¯¼èˆª (WebXR)
- [ ] å®æ—¶äººæµçƒ­åŠ›å›¾

### æŠ€æœ¯å€ºåŠ¡
- è€ƒè™‘ä½¿ç”¨å‰ç«¯æ¡†æ¶ (Vue/React) é‡æ„
- æ·»åŠ å•å…ƒæµ‹è¯•å’Œ E2E æµ‹è¯•
- å®ç° CI/CD è‡ªåŠ¨éƒ¨ç½²
- ç›‘æ§å’Œæ—¥å¿—ç³»ç»Ÿå®Œå–„
- é”™è¯¯ä¸ŠæŠ¥å’Œåˆ†æ

---

## ç»´æŠ¤æŒ‡å—

### æ—¥å¸¸ç»´æŠ¤
1. æ£€æŸ¥ Cron ä»»åŠ¡æ‰§è¡Œæ—¥å¿—
2. ç›‘æ§æœåŠ¡å™¨èµ„æºä½¿ç”¨
3. å®šæœŸå¤‡ä»½ POI.json å’Œ MBTiles
4. æŸ¥çœ‹ç”¨æˆ·åé¦ˆ (GitHub Issues)
5. æ›´æ–°ä¾èµ–ç‰ˆæœ¬

### æ•…éšœæ’æŸ¥

**POI ä¸æ˜¾ç¤º**:
- æ£€æŸ¥ POI.json æ–‡ä»¶æ˜¯å¦å­˜åœ¨å’Œæœ‰æ•ˆ
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯
- éªŒè¯ Overpass API æ˜¯å¦å¯è®¿é—®

**åœ°å›¾ç“¦ç‰‡æ— æ³•åŠ è½½**:
- æ£€æŸ¥ TileServer GL å®¹å™¨æ˜¯å¦è¿è¡Œ (`docker ps`)
- éªŒè¯ MBTiles æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- æ£€æŸ¥ EdgeOne CDN å›æºé…ç½®
- æµ‹è¯•æºç«™ç›´æ¥è®¿é—® `vps.haotian22.top:8080`
- æ¸…é™¤ CDN ç¼“å­˜ï¼ˆå¦‚éœ€è¦ï¼‰
- æŸ¥çœ‹ TileServer æ—¥å¿—

**æœç´¢åŠŸèƒ½å¼‚å¸¸**:
- éªŒè¯ pinyin-pro åº“æ˜¯å¦åŠ è½½
- æ£€æŸ¥ markerData æ•°ç»„æ˜¯å¦æ­£ç¡®å¡«å……
- æµ‹è¯•ä¸åŒçš„æœç´¢å…³é”®è¯

**å®šä½åŠŸèƒ½ä¸å·¥ä½œ**:
- ç¡®è®¤ç”¨æˆ·å·²æˆäºˆä½ç½®æƒé™
- æ£€æŸ¥æ˜¯å¦ä½¿ç”¨ HTTPS (Geolocation API è¦æ±‚)
- æµ‹è¯•ä¸åŒæµè§ˆå™¨å…¼å®¹æ€§

---

## è”ç³»æ–¹å¼

- **GitHub Issues**: https://github.com/HaoTian22/BNBU-Map/issues
- **Email**: hao_tian22@outlook.com
- **Demo**: https://u-map.haotian22.top

---

## è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº OpenStreetMap æ•°æ®æ„å»ºï¼Œéµå¾ª ODbL è®¸å¯è¯ã€‚

- åœ°å›¾æ•°æ®: Â© OpenStreetMap contributors
- åœ°å›¾æ ·å¼: OSM Liberty (BSD 3-Clause)
- å…¶ä»–ä»£ç : æŸ¥çœ‹ LICENSE æ–‡ä»¶

---

**æ–‡æ¡£æœ€åæ›´æ–°**: 2026-01-20
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
